<include file="theme:Public:header" group="Website"/>
<link rel="stylesheet" href="/Style/H/new_register/css/style.css">
<script type="text/javascript" src="/Style/Js/jquery.cookie.js"></script>
<script src="/Style/H/new_register/js/main.js" type="text/javascript"></script>
<script src="/Style/H/new_register/js/modernizr.js" type="text/javascript"></script>
<script src="/Style/H/new_register/js/reg_new.js" type="text/javascript"></script>
<script src="/Style/H/js/placeholder.js" type="text/javascript"></script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<style>
    .personal, .business {
        display: none;
    }

    #qiyeyonghu input[type=radio] {
        padding: 0;
        margin: 0;
        display: none;
    }

    #qiyeyonghu label {
        background: none;
        width: 124px;
        height: 44px;
        line-height: 44px;
        border: #0697d9 solid 1px;
        text-align: center;
        background-color: #fff;
        cursor: pointer;
    }

    #qiyeyonghu .active {
        background-image: url("/radioBackground.png");
        background-repeat: no-repeat;
        background-position: bottom right;
    }
</style>

<script type="text/javascript">
    $(function () {
        $('body').addClass('reg-body');
    });
    var curpath_new = "__URL__";
</script>
<main>
    <div class="regi">
        <div class="cd-image-block">
            <ul class="cd-images-list">
                <li
                <if condition="$step gt 1">class="move-left"
                    <else/>
                    class="is-selected"
                </if>
                >
                <a href="#0">
                    <h2></h2>
                </a>
                </li>
                <li
                <if condition="$step gt 2">class="move-left"
                    <elseif condition="$step eq 2"/>
                    class="is-selected"
                </if>
                >
                <a href="#0">
                    <h2></h2>
                </a>
                </li>

                <li
                <if condition="$step gt 3">class="move-left"
                    <elseif condition="$step eq 3"/>
                    class="is-selected"
                </if>
                >
                <a href="#0">
                    <h2></h2>
                </a>
                </li>

                <li
                <if condition="$step eq 4">class="is-selected"</if>
                >
                <a href="#0">
                    <h2></h2>
                </a>
                </li>
            </ul>
        </div>
        <div class="cd-content-block">
            <ul>
                <li style="left:110px; top:11%;"
                <if condition="$step gt 1">class="move-left"
                    <else/>
                    class="is-selected"
                </if>
                >
                <div class="new-reg">
                    <div class="new-reg-box">
                        <div class="title-tip3">
                            <label>1</label>
                            <font>注册用户信息</font>
                        </div>
                        <div class="title-tip1">
                            <label style="left:43px;">2</label>
                            <font>实名认证</font>
                        </div>
                        <div class="title-tip1">
                            <label style="left:58px;">3</label>
                            <font>设置交易密码</font>
                        </div>
                        <div class="title-tip1">
                            <label style="left:41px;">4</label>
                            <font>注册成功</font>
                        </div>
                        <div class="clear" style="height: 20px;"></div>
                        <ul>
                            <li style="margin-top:-38px;">
                                <input type="text" placeholder="请输入手机号" id="phone" class="nrb-t1 nrb-t1-330"
                                       onblur="phone_onblur()"/>
                                <div style="float: right" id="phone_err"></div>
                            </li>
                            <li>
                                <input type="text" id="img_code" placeholder="请输入验证码" class="nrb-t1 nrb-t1-220"
                                       style="float: left" onblur="img_code_onblur()"/>
                                <img onclick="this.src=this.src+'?t='+Math.random()" id="imVcode" alt="点击换一个校验码"
                                     src="__URL__/verify">
                                <div style="float: right" id="img_code_err"></div>
                                <div class="clear"></div>
                            </li>
                            <li style="position: relative">
                                <input type="text" placeholder="请输入手机验证码" id="phone_code" class="nrb-t1 nrb-t1-220"
                                       onblur="phone_code_onblur()"/>
                                <input type="button" value="获取短信验证码" class="sms-btn" id="sms-btn" onclick="smssend()"/>
                                <div style="float: right" id="phone_code_err"></div>
                            </li>
                            <li style="position: relative" id="qiyeyonghu">
                                <label>
                                    <input type="radio" name="type" value="1"> 个人用户
                                </label>
                                <label>
                                    <input type="radio" name="type" value="2"> 企业用户
                                </label>
                            </li>
                            <li>
                                <input type="password" placeholder="请输入密码" id="password" class="nrb-t1 nrb-t1-330"
                                       onblur="password_onblur()"/>
                                <div style="float: right" id="password_err"></div>
                            </li>
                            <li>
                                <input type="password" placeholder="请输入确认密码" id="password_c" class="nrb-t1 nrb-t1-330"
                                       onblur="password_c_onblur()"/>
                                <div style="float: right" id="password_c_err"></div>
                            </li>
                            <li>
                                <input type="text" placeholder="邀请人手机号(选填)" id="invite" class="nrb-t1 nrb-t1-330"
                                       value="{$in}"
                                <if condition="$invite neq ''">readonly=readonly
                                    <else/>
                                    onblur="invite_onblur()"
                                </if>
                                />
                                <div style="float: right" id="invite_err"></div>
                            </li>
                            <li style=" margin-top:-15px;">
                                <input checked type="checkbox" id="xieyi" value="1"
                                       style=" position:relative; top:2px;"/><!--<label for="xieyi"></label>-->&nbsp;&nbsp;<font
                                    style="color: #444; font-size:14px;">我同意</font><a href="/zhucexieyi/index.html"
                                                                                      target="_blank"
                                                                                      style="color:#444; font-size:14px;">《注册服务协议》</a>
                            </li>
                            <li>
                                <input type="hidden" id="invite_user_id" value="{$invite|default=0}"/>
                                <a href="javascript:testSubmit();" class="s_btn" id="submit">立即注册</a>
                            </li>
                            <li style="position:relative; top:-20px; left:185px; font-size:16px; color:#444;">
                                已有账号？<a href="/user" style="color:#ffa453;">登录</a>
                            </li>
                        </ul>
                    </div>
                </div>
                </li>
                <div class="line"
                     style="height:700px; width:50px; position:absolute; top:11%; left:80px; background:#fff;"></div>
                <li style="left:100px; top:20%;"
                <if condition="$step gt 2">class="move-left"
                    <elseif condition="$step eq 2"/>
                    class="is-selected"
                </if>
                >

                <div class="new-reg personal">
                    <div class="new-reg-box">
                        <div class="title-tip2" style="position:relative; left:-20px;">
                            <label style="left:58px;">1</label>
                            <font>注册用户信息</font>
                        </div>
                        <div class="title-tip3">
                            <label style="left:43px;">2</label>
                            <font>实名认证</font>
                        </div>
                        <div class="title-tip1">
                            <label style="left:58px;">3</label>
                            <font>设置交易密码</font>
                        </div>
                        <div class="title-tip1">
                            <label style="left:43px;">4</label>
                            <font>注册成功</font>
                        </div>
                        <div class="clear" style="height: 20px;"></div>
                        <ul>
                            <li style="margin-top:-38px;">
                                <input type="text" placeholder="请输入姓名" id="real_name" class="nrb-t1 nrb-t1-330"
                                       onblur="real_name_onblur()"/>
                                <div style="float: right" id="real_name_err"></div>
                            </li>
                            <li>
                                <input type="text" placeholder="请输入身份证号" id="idcard" class="nrb-t1 nrb-t1-330"
                                       onblur="idcard_onblur()" onkeyup="value=this.value.replace(/[^0-9|x|X]+/g,"")"
                                maxlength="18"/>
                                <div style="float: right" id="idcard_err"></div>
                            </li>
                            <li>
                                <a href="javascript:submit_real();" class="s_btn" id="submit_real">下一步</a>
                            </li>
                        </ul>
                    </div>
                </div>


                <div class="new-reg business">
                    <div class="new-reg-box">
                        <div class="title-tip2" style="position:relative; left:-20px;">
                            <label style="left:58px;">1</label>
                            <font>注册用户信息</font>
                        </div>
                        <div class="title-tip3">
                            <label style="left:43px;">2</label>
                            <font>实名认证</font>
                        </div>
                        <div class="title-tip1">
                            <label style="left:58px;">3</label>
                            <font>设置交易密码</font>
                        </div>
                        <div class="title-tip1">
                            <label style="left:43px;">4</label>
                            <font>注册成功</font>
                        </div>
                        <div class="clear" style="height: 20px;"></div>
                        <ul>
                            <li style="margin-top:-38px;">
                                <input type="text" placeholder="请输入企业名称" id="business_name" class="nrb-t1 nrb-t1-330"
                                       onblur="business_name_onblur()">

                                <div style="float: right" id="business_name_err"></div>
                            </li>
                            <li>
                                <input type="text" placeholder="请输入营业执照" id="business_num" class="nrb-t1 nrb-t1-330"
                                       onblur="business_num_onblur()">

                                <div style="float: right" id="business_err"></div>
                            </li>
                            <li>
                                <input type="text" placeholder="请输入法人姓名" id="real_name_business"
                                       class="nrb-t1 nrb-t1-330"
                                       onblur="real_name_businessonblur()"/>
                                <div style="float: right" id="real_name_business_err"></div>
                            </li>
                            <li>
                                <input type="text" placeholder="请输入法人身份证号" id="idcard_num" class="nrb-t1 nrb-t1-330"
                                       onblur="idcard_num_onblur()" onkeyup="value=this.value.replace(/[^0-9|x|X]+/g,"")"
                                maxlength="18"/>
                                <div style="float: right" id="idcard_num_err"></div>
                            </li>
                            <li>
                                <a href="javascript:submit_business();" class="s_btn" id="_submit_real">下一步</a>
                            </li>
                        </ul>
                    </div>
                </div>

                </li>
                <div class="line"
                     style="height:700px; width:50px; position:absolute; top:13%; left:80px; background:#fff;"></div>
                <li style="left:100px; top:20%;"
                <if condition="$step gt 3">class="move-left"
                    <elseif condition="$step eq 3"/>
                    class="is-selected"
                </if>
                >
                <div class="new-reg">
                    <div class="new-reg-box">
                        <div class="title-tip2" style="position:relative; left:-20px;">
                            <label style="left:58px;">1</label>
                            <font>注册用户信息</font>
                        </div>
                        <div class="title-tip2" style="position:relative; left:-20px;">
                            <label style="left:43px;">2</label>
                            <font>实名认证</font>
                        </div>
                        <div class="title-tip3">
                            <label style="left:58px;">3</label>
                            <font>设置交易密码</font>
                        </div>
                        <div class="title-tip1">
                            <label style="left:43px;">4</label>
                            <font>注册成功</font>
                        </div>
                        <div class="clear" style="height: 20px;"></div>
                        <ul>
                            <li style="margin-top:-38px;">
                                <input type="password" placeholder="请输入交易密码" id="pin" class="nrb-t1 nrb-t1-330"
                                       maxlength="16" onblur="pin_onblur()"/>
                                <div style="float: right" id="pin_err"></div>
                            </li>
                            <li>
                                <input type="password" placeholder="请确认交易密码" id="pin_c" class="nrb-t1 nrb-t1-330"
                                       maxlength="16" onblur="pin_c_onblur()"/>
                                <div style="float: right" id="pin_c_err"></div>
                            </li>
                            <li>
                                <a href="javascript:submit_pin();" class="s_btn" id="submit_pin">下一步</a>
                            </li>
                        </ul>
                    </div>
                </div>
                </li>
                <div class="line"
                     style="height:700px; width:50px; position:absolute; top:15%; left:80px; background:#fff;"></div>
                <li style="left:100px; top:20%;"
                <if condition="$step eq 4">class="is-selected"</if>
                >
                <div class="new-reg">
                    <div class="new-reg-box" style="height: 312px;">
                        <div class="title-tip2">
                            <label style="left:58px;">1</label>
                            <font>注册用户信息</font>
                        </div>
                        <div class="title-tip2">
                            <label style="left:43px;">2</label>
                            <font>实名认证</font>
                        </div>
                        <div class="title-tip2">
                            <label style="left:58px;">3</label>
                            <font>设置交易密码</font>
                        </div>
                        <div class="title-tip3" style="position:relative; left:20px;">
                            <label style="left:43px;">4</label>
                            <font>注册成功</font>
                        </div>
                        <div class="clear" style="height: 20px;"></div>
                        <img src="/Style/H/images/complete_yes.png" style="position:relative; top:28px; left:175px;"/>
                        <div class="complete">
                            <div class="complete-word">
                                <span style="font-size: 18px;">恭喜您注册完成</span>
                                <span>查看账号信息，去<a href="/user">个人中心</a> </span>
                                <span style="margin-top:10px;">您还可以去▼</span>
                            </div>
                            <a href="/invest/index.html" class="a-btn">投资项目</a>&nbsp;&nbsp;&nbsp;<a
                                href="/user/charge#fragment-1" class="a-btn">充值</a>
                            <div class="clear" style="height: 40px;"></div>
                        </div>
                    </div>
                </div>
                </li>
            </ul>
        </div>

        <ul class="block-navigation" style="display: none">
            <li>
                <button class="cd-prev inactive">上一页</button>
            </li>
            <li>
                <button class="cd-next" id="cd-next">下一页</button>
            </li>
        </ul>
    </div>
</main>


<script>
    $(function () {
        var className = 'active';
        var input = $('#qiyeyonghu').find('input[name=type]');
        input.change(function () {
            input.parent().removeClass(className);
            $(this).parent().addClass(className);
        });
        regionTypeFun((parseInt('{$business}') + 1) + "")
    });

    function testSubmit() {
        var type = $('input[name=type]:checked').val();
        if (regionTypeFun(type)) {
            submit_reg()
        }
    }

    function regionTypeFun(type) {
        if (type) {
            // 个人注册
            if (type === '1') $('.personal').show();
            // 企业注册
            else $('.business').show();
            return true;
        } else {
            layer.msg('请选择用户类型', {icon: 5, shade: 0.3});
            return false;
        }
    }

    function submit_business() {
        var business_name = $('#business_name').val();
        var business_code = $('#business_num').val();
        var real_name_business = $('#real_name_business').val();
        var idcard_num = $('#idcard_num').val();

        var ii = layer.load();

        var data = {
            real_name: real_name_business,
            idcard: idcard_num,
            business_name: business_name,
            business_code: business_code
        };

        $.ajax({
            url: curpath_new + "/checkbusiness/",
            data: data,
            type: "post",
            dataType: "json",
            success: function (d) {
                console.log(d);
                layer.close(ii);
                if (d.status === 1) {
                    layer.msg(d.message, {icon: 6, shade: 0.3});
                    $("#cd-next").trigger("click");
                } else {
                    layer.msg(d.message, {icon: 5, shade: 0.3});
                }
            }
        });
    }


</script>

<include file="Public:_footer"/>
